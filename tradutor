import speech_recognition as sr #https://pypi.org/project/SpeechRecognition/
import pyttsx3 #https://pypi.org/search/?q=pyttsx3
from googletrans import Translator #https://pypi.org/project/googletrans2/
import time

rec = sr.Recognizer()
engine = pyttsx3.init()
voices = engine.getProperty('voices')
trans = Translator()

with sr.Microphone() as mic:
    while True:
        print("Pode Falar")
        rec.adjust_for_ambient_noise(mic)
        audio = rec.listen(mic)
        time.sleep(1)
        if audio != '':
            texto = rec.recognize_google(audio, language="pt-br")
            texto = texto.lower()
            if 'pergunta' in texto:
                texto = texto.replace('pergunta','')
                print (trans.translate(f"{texto}", dest='en').text)
                engine.setProperty('voice', voices[1].id)
                engine.say(trans.translate(f"{texto}").text)
                engine.runAndWait()
                engine.runAndWait()
            
            else:
                texto = rec.recognize_google(audio, language="en")
                print (trans.translate(f"{texto}", dest='pt').text)
                engine.setProperty('voice', voices[0].id)
                engine.say(trans.translate(f"{texto}",dest='pt').text)
                engine.runAndWait()

           
    